effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
},
")
output
}
timeline = function(i){
hour = i %/% 4
min = (i %% 4)*15
if (min == 15| min == 30){
output = paste0("'",hour,":",min,"-",hour,":",min+15,"'")
}else if(min == 45){
output = paste0("'",hour,":",min,"-",hour+1,":","00","'")
}else{
output = paste0("'",hour,":",'00',"-",hour,":","15","'")
}
return(output)
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",substr(time[i-26],2,12),")',
x:'right'
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
},
")
output
}
timeline = function(i){
hour = i %/% 4
min = (i %% 4)*15
if (min == 15| min == 30){
output = paste0("'",hour,":",min,"-",hour,":",min+15,"'")
}else if(min == 45){
output = paste0("'",hour,":",min,"-",hour+1,":","00","'")
}else{
output = paste0("'",hour,":",'00',"-",hour,":","15","'")
}
return(output)
}
time = sapply(27:93,timeline)
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",substr(time[i-26],2,12),")',
x:'right'
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
}")
output
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",substr(time[i-26],2,11),")',
x:'right'
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
}")
output
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
substr(time[i-26],2,11)
i=27
substr(time[i-26],2,11)
substr(time[i-26],2,12)
substr(time[i-26],2,11)
substr(time[i-26],2,10)
timeline2 = function(i){
hour = i %/% 4
min = (i %% 4)*15
if (min == 15| min == 30){
output = paste0(hour,":",min,"-",hour,":",min+15)
}else if(min == 45){
output = paste0(hour,":",min,"-",hour+1,":","00")
}else{
output = paste0(hour,":",'00',"-",hour,":","15")
}
return(output)
}
time = sapply(27:93,timeline2)
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",time[i-26],")',
x:'right'
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
}")
output
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",time[i-26],")',
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
}")
output
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare.js")
get_echarts = function(i){
data = depart[depart$label==i,]
part1_vec = apply(data,1,function(x)
paste0("[{name:'上海'},{name:'",
x[12],"',value:'",x[3],",",
x[6],":",x[7],"'}]"))
part1 = paste(part1_vec,collapse = ",\n")
part2_vec = apply(data,1,function(x)
paste0("{name:'",
x[12],"',value:",x[13],"}"))
part2 = paste(part2_vec,collapse = ",\n")
output = paste0(
"{
title : {
text: '动态航班',
subtext:'上海航班(",time[i-26],")',
},
series:[
{
type:'map',
data:[],
markLine : {
smooth:true,
effect : {
show: true,
scaleSize: 1,
period: 30,
color: '#fff',
shadowBlur: 10
},
itemStyle : {
normal: {
borderWidth:1,
lineStyle: {
type: 'solid',
shadowBlur: 10
}
}
},
data : [",
part1,
"]
},
markPoint : {
symbol:'emptyCircle',
symbolSize : function (v){
return 10 + v
},
effect : {
show: true,
shadowBlur : 0
},
itemStyle:{
normal:{
label:{show:false}
}
},
data : [",
part2,
"]
}
}
]
}")
output
}
echarts_vec = sapply(27:93,get_echarts)
echarts = paste(echarts_vec,collapse = ",\n")
writeLines(echarts,"js/prepare1.js")
